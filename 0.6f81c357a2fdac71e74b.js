(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{o1NI:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),a=function(){},u=e("pMnS"),s=function(){function n(){this.toggleList=new t.m}return n.prototype.ngOnInit=function(){},n}(),o=t.La({encapsulation:0,styles:[[".header-container[_ngcontent-%COMP%]{height:50px;background-color:#228be6;display:flex;align-items:center}.header-container[_ngcontent-%COMP%]   .toogle-btn[_ngcontent-%COMP%]{margin-left:20px;cursor:pointer}.header-container[_ngcontent-%COMP%]   .toogle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}"]],data:{}});function i(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,2,"div",[["class","header-container"]],null,null,null,null,null)),(n()(),t.Na(1,0,null,null,1,"a",[["class","toogle-btn"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.toggleList.emit()&&t),t},null,null)),(n()(),t.Na(2,0,null,null,0,"i",[["class","fas fa-align-justify"]],null,null,null,null,null))],null,null)}var r=e("ZYCi"),c=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),g=t.La({encapsulation:0,styles:[[".content[_ngcontent-%COMP%]{height:calc(100% - 50px)}"]],data:{}});function p(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,1,"app-header",[],null,null,null,i,o)),t.Ma(1,114688,null,0,s,[],null,null),(n()(),t.Na(2,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),t.Na(3,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.Ma(4,212992,null,0,r.p,[r.b,t.M,t.j,[8,null],t.h],null,null)],function(n,l){n(l,1,0),n(l,4,0)},null)}var d=t.Ja("app-main",c,function(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,1,"app-main",[],null,null,null,p,g)),t.Ma(1,114688,null,0,c,[],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),f=e("Ip0R"),h=e("N/25"),m=function(){function n(n){var l=this;this.authService=n,this.isOwnMessage=!1,n.authUser().subscribe(function(n){l.isOwnMessage=n.email===l.chatMessage.email})}return n.prototype.ngOnInit=function(){},n}(),M=t.La({encapsulation:0,styles:[[".message-wrapper[_ngcontent-%COMP%]{display:flex;padding:4px 10px;font-family:'Open Sans',sans-serif}.message-wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px;-ms-grid-row-align:center;align-self:center}.message-wrapper[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1}.message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#6f6f6f}.message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .sender[_ngcontent-%COMP%]{font-size:14px;font-weight:700px}.message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:12px;font-style:italic}.message-wrapper[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:inline-block;background:#dedede;border-radius:24px;font-size:14px;padding:4px 10px;word-break:break-word}.message-wrapper.own[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:#51a3fb;color:#fff}"]],data:{}});function b(n){return t.gb(0,[t.Ya(0,f.e,[t.s]),(n()(),t.Na(1,0,null,null,13,"div",[["class","message-wrapper"]],null,null,null,null,null)),t.Ma(2,278528,null,0,f.k,[t.q,t.r,t.k,t.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Za(3,{own:0}),(n()(),t.Na(4,0,null,null,1,"div",[["class","avatar"]],null,null,null,null,null)),(n()(),t.Na(5,0,null,null,0,"img",[["alt",""],["src","https://cdn.iconscout.com/public/images/icon/free/png-512/avatar-user-business-man-399587fe24739d5a-512x512.png"]],null,null,null,null,null)),(n()(),t.Na(6,0,null,null,8,"div",[["class","message"]],null,null,null,null,null)),(n()(),t.Na(7,0,null,null,5,"div",[["class","user"]],null,null,null,null,null)),(n()(),t.Na(8,0,null,null,1,"span",[["class","sender"]],null,null,null,null,null)),(n()(),t.eb(9,null,[" "," "])),(n()(),t.Na(10,0,null,null,2,"span",[["class","time"]],null,null,null,null,null)),(n()(),t.eb(11,null,[" "," "])),t.ab(12,2),(n()(),t.Na(13,0,null,null,1,"div",[["class","content"]],null,null,null,null,null)),(n()(),t.eb(14,null,["",""]))],function(n,l){n(l,2,0,"message-wrapper",n(l,3,0,l.component.isOwnMessage))},function(n,l){var e=l.component;n(l,9,0,e.chatMessage.userName),n(l,11,0,t.fb(l,11,0,n(l,12,0,t.Xa(l,0),e.chatMessage.timeSent,"medium"))),n(l,14,0,e.chatMessage.message)})}var C=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),O=t.La({encapsulation:0,styles:[[".feed-wrapper[_ngcontent-%COMP%]{padding:10px 0}"]],data:{}});function v(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,2,"div",[["class","message"]],null,null,null,null,null)),(n()(),t.Na(1,0,null,null,1,"app-message",[],null,null,null,b,M)),t.Ma(2,114688,null,0,m,[h.a],{chatMessage:[0,"chatMessage"]},null)],function(n,l){n(l,2,0,l.context.$implicit)},null)}function w(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,2,"div",[["class","feed-wrapper"]],null,null,null,null,null)),(n()(),t.Ea(16777216,null,null,1,null,v)),t.Ma(2,802816,null,0,f.l,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.feed)},null)}var x=e("gIcY"),y=function(){function n(){this.sending=new t.m}return n.prototype.ngOnInit=function(){},n.prototype.send=function(){this.sending.emit(this.message),this.message=""},n.prototype.handelSubmit=function(n){13===n.keyCode&&(this.sending.emit(n.target.value),this.message="")},n}(),P=t.La({encapsulation:0,styles:[[".form-wrapper[_ngcontent-%COMP%]{height:50px;background:#fff;box-shadow:0 -1px 25px 0 rgba(0,0,0,.3);display:flex;align-items:center;padding:10px 20px;font-family:'Open Sans',sans-serif;font-size:14px}.form-wrapper[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{flex:1;border-radius:20px;border:1px solid rgba(0,0,0,.16);margin-right:20px;outline:0;padding:4px 14px}.form-wrapper[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{border-radius:20px;width:100px;background:#228be6;color:#fff;outline:0}"]],data:{}});function _(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,8,"div",[["class","form-wrapper"]],null,null,null,null,null)),(n()(),t.Na(1,0,null,null,5,"input",[["class","chat-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var a=!0,u=n.component;return"input"===l&&(a=!1!==t.Xa(n,2)._handleInput(e.target.value)&&a),"blur"===l&&(a=!1!==t.Xa(n,2).onTouched()&&a),"compositionstart"===l&&(a=!1!==t.Xa(n,2)._compositionStart()&&a),"compositionend"===l&&(a=!1!==t.Xa(n,2)._compositionEnd(e.target.value)&&a),"ngModelChange"===l&&(a=!1!==(u.message=e)&&a),"keydown"===l&&(a=!1!==u.handelSubmit(e)&&a),a},null,null)),t.Ma(2,16384,null,0,x.c,[t.B,t.k,[2,x.a]],null,null),t.bb(1024,null,x.f,function(n){return[n]},[x.c]),t.Ma(4,671744,null,0,x.k,[[8,null],[8,null],[8,null],[6,x.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.bb(2048,null,x.g,null,[x.k]),t.Ma(6,16384,null,0,x.h,[[4,x.g]],null,null),(n()(),t.Na(7,0,null,null,1,"button",[["class","send-btn"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.send()&&t),t},null,null)),(n()(),t.eb(-1,null,["Send"]))],function(n,l){n(l,4,0,l.component.message)},function(n,l){n(l,1,0,t.Xa(l,6).ngClassUntouched,t.Xa(l,6).ngClassTouched,t.Xa(l,6).ngClassPristine,t.Xa(l,6).ngClassDirty,t.Xa(l,6).ngClassValid,t.Xa(l,6).ngClassInvalid,t.Xa(l,6).ngClassPending)})}var N=e("6233"),k=e("Oipj"),V=function(){function n(n,l){var e=this;this.db=n,this.afAuth=l,this.afAuth.authState.subscribe(function(n){void 0!==n&&null!==n&&(e.user=n),e.getUser().subscribe(function(n){e.userName=n.displayName})})}return n.prototype.getUser=function(){return this.db.object("/users/"+this.user.uid).valueChanges()},n.prototype.sendMessage=function(n){var l=this.getTimeStamp(),e=this.user.email,t=this.userName;this.chatMessages=this.getMessages(),this.chatMessages.push({email:e,message:n,userName:t,timeSent:l})},n.prototype.getMessages=function(){return this.db.list("messages",function(n){return n.limitToFirst(25).orderByKey()})},n.prototype.getTimeStamp=function(){var n=new Date;return n.getUTCFullYear()+"/"+(n.getUTCMonth()+1)+"/"+n.getUTCDate()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds()},n.ngInjectableDef=t.Q({factory:function(){return new n(t.U(N.a),t.U(k.a))},token:n,providedIn:"root"}),n}(),S=function(){function n(n){this.chatService=n,this.isListOpen=!1}return n.prototype.ngOnInit=function(){this.feed=this.chatService.getMessages().valueChanges()},n.prototype.sendMessage=function(n){this.chatService.sendMessage(n)},n.prototype.scrollToBottom=function(){this.feedContainer.nativeElement.scrollTop=this.feedContainer.nativeElement.scrollHeight},n.prototype.ngAfterViewChecked=function(){this.scrollToBottom()},n}(),T=t.La({encapsulation:0,styles:[[".chat-page-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.chat-page-container[_ngcontent-%COMP%]   .app-feed[_ngcontent-%COMP%]{flex:1;overflow:auto}"]],data:{}});function I(n){return t.gb(0,[t.cb(402653184,1,{feedContainer:0}),(n()(),t.Na(1,0,null,null,7,"div",[["class","chat-page-container"]],null,null,null,null,null)),(n()(),t.Na(2,0,[[1,0],["scroller",1]],null,3,"div",[["class","app-feed"]],null,null,null,null,null)),(n()(),t.Na(3,0,null,null,2,"app-feed",[],null,null,null,w,O)),t.Ma(4,114688,null,0,C,[],{feed:[0,"feed"]},null),t.Ya(131072,f.b,[t.h]),(n()(),t.Na(6,0,null,null,2,"div",[["class","chat-form"]],null,null,null,null,null)),(n()(),t.Na(7,0,null,null,1,"app-chat-form",[],null,[[null,"sending"]],function(n,l,e){var t=!0;return"sending"===l&&(t=!1!==n.component.sendMessage(e)&&t),t},_,P)),t.Ma(8,114688,null,0,y,[],null,{sending:"sending"})],function(n,l){var e=l.component;n(l,4,0,t.fb(l,4,0,t.Xa(l,5).transform(e.feed))),n(l,8,0)},null)}var U=t.Ja("app-chat-page",S,function(n){return t.gb(0,[(n()(),t.Na(0,0,null,null,1,"app-chat-page",[],null,null,null,I,T)),t.Ma(1,8503296,null,0,S,[V],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),X=e("MMa0"),j=function(){},L=e("PCNd"),z=e("yGQT");e.d(l,"MainModuleNgFactory",function(){return F});var F=t.Ka(a,[],function(n){return t.Ua([t.Va(512,t.j,t.Z,[[8,[u.a,d,U]],[3,t.j],t.v]),t.Va(4608,f.o,f.n,[t.s,[2,f.x]]),t.Va(4608,x.o,x.o,[]),t.Va(5120,X.b,X.g,[X.d,[2,X.c]]),t.Va(4608,N.a,N.a,[X.d,[2,X.c],[2,X.f],t.z,t.x]),t.Va(4608,k.a,k.a,[X.d,[2,X.c],t.z,t.x]),t.Va(1073742336,f.c,f.c,[]),t.Va(1073742336,r.o,r.o,[[2,r.v],[2,r.n]]),t.Va(1073742336,j,j,[]),t.Va(1073742336,x.m,x.m,[]),t.Va(1073742336,x.d,x.d,[]),t.Va(1073742336,X.a,X.a,[]),t.Va(1073742336,N.b,N.b,[]),t.Va(1073742336,k.b,k.b,[]),t.Va(1073742336,L.a,L.a,[]),t.Va(1024,z.j,function(){return[{key:"main",reducerFactory:z.z,metaReducers:[],initialState:void 0}]},[]),t.Va(1024,z.q,function(){return[{}]},[]),t.Va(1024,z.r,function(n){return[n]},[z.q]),t.Va(1024,z.b,function(n,l,e){return[z.w(n,l,e)]},[t.p,z.q,z.r]),t.Va(1073873408,z.o,z.o,[z.j,z.b,z.g,z.p]),t.Va(1073742336,a,a,[]),t.Va(1024,r.l,function(){return[[{path:"",component:c,children:[{path:"chat",component:S},{path:"",redirectTo:"chat"}]}]]},[])])})}}]);